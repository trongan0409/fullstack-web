{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport { isPromise } from '../../utils/tool';\nimport getUploadPlaceholder from '../../utils/uploadPlaceholder';\nimport InputFile from './inputFile';\n\nvar Image = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Image, _PluginComponent);\n\n  function Image(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.inputFile = /*#__PURE__*/React.createRef();\n    _this.onImageChanged = _this.onImageChanged.bind(_assertThisInitialized(_this));\n    _this.handleCustomImageUpload = _this.handleCustomImageUpload.bind(_assertThisInitialized(_this));\n    _this.handleImageUpload = _this.handleImageUpload.bind(_assertThisInitialized(_this));\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  var _proto = Image.prototype;\n\n  _proto.handleImageUpload = function handleImageUpload() {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (typeof onImageUpload === 'function') {\n      if (this.inputFile.current) {\n        this.inputFile.current.click();\n      }\n    } else {\n      this.editor.insertMarkdown('image');\n    }\n  };\n\n  _proto.onImageChanged = function onImageChanged(file) {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (onImageUpload) {\n      var placeholder = getUploadPlaceholder(file, onImageUpload);\n      this.editor.insertPlaceholder(placeholder.placeholder, placeholder.uploaded);\n    }\n  };\n\n  _proto.handleCustomImageUpload = function handleCustomImageUpload(e) {\n    var _this2 = this;\n\n    var onCustomImageUpload = this.editorConfig.onCustomImageUpload;\n\n    if (onCustomImageUpload) {\n      var res = onCustomImageUpload.call(this, e);\n\n      if (isPromise(res)) {\n        res.then(function (result) {\n          if (result && result.url) {\n            _this2.editor.insertMarkdown('image', {\n              target: result.text,\n              imageUrl: result.url\n            });\n          }\n        });\n      }\n    }\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    var isCustom = !!this.editorConfig.onCustomImageUpload;\n    return isCustom ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleCustomImageUpload\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    })) : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleImageUpload,\n      style: {\n        position: 'relative'\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    }), /*#__PURE__*/React.createElement(InputFile, {\n      accept: this.editorConfig.imageAccept || '',\n      ref: this.inputFile,\n      onChange: function onChange(e) {\n        e.persist();\n\n        if (e.target.files && e.target.files.length > 0) {\n          _this3.onImageChanged(e.target.files[0]);\n        }\n      }\n    }));\n  };\n\n  return Image;\n}(PluginComponent);\n\nImage.pluginName = 'image';\nexport { Image as default };","map":{"version":3,"sources":["E:/fullstack/reactjs/node_modules/react-markdown-editor-lite/esm/plugins/Image/index.js"],"names":["_assertThisInitialized","_inheritsLoose","React","Icon","i18n","PluginComponent","isPromise","getUploadPlaceholder","InputFile","Image","_PluginComponent","props","_this","call","inputFile","createRef","onImageChanged","bind","handleCustomImageUpload","handleImageUpload","state","show","_proto","prototype","onImageUpload","editorConfig","current","click","editor","insertMarkdown","file","placeholder","insertPlaceholder","uploaded","e","_this2","onCustomImageUpload","res","then","result","url","target","text","imageUrl","render","_this3","isCustom","createElement","className","title","get","onClick","type","style","position","accept","imageAccept","ref","onChange","persist","files","length","pluginName","default"],"mappings":"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","sourcesContent":["import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport { isPromise } from '../../utils/tool';\nimport getUploadPlaceholder from '../../utils/uploadPlaceholder';\nimport InputFile from './inputFile';\n\nvar Image = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Image, _PluginComponent);\n\n  function Image(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.inputFile = /*#__PURE__*/React.createRef();\n    _this.onImageChanged = _this.onImageChanged.bind(_assertThisInitialized(_this));\n    _this.handleCustomImageUpload = _this.handleCustomImageUpload.bind(_assertThisInitialized(_this));\n    _this.handleImageUpload = _this.handleImageUpload.bind(_assertThisInitialized(_this));\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  var _proto = Image.prototype;\n\n  _proto.handleImageUpload = function handleImageUpload() {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (typeof onImageUpload === 'function') {\n      if (this.inputFile.current) {\n        this.inputFile.current.click();\n      }\n    } else {\n      this.editor.insertMarkdown('image');\n    }\n  };\n\n  _proto.onImageChanged = function onImageChanged(file) {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (onImageUpload) {\n      var placeholder = getUploadPlaceholder(file, onImageUpload);\n      this.editor.insertPlaceholder(placeholder.placeholder, placeholder.uploaded);\n    }\n  };\n\n  _proto.handleCustomImageUpload = function handleCustomImageUpload(e) {\n    var _this2 = this;\n\n    var onCustomImageUpload = this.editorConfig.onCustomImageUpload;\n\n    if (onCustomImageUpload) {\n      var res = onCustomImageUpload.call(this, e);\n\n      if (isPromise(res)) {\n        res.then(function (result) {\n          if (result && result.url) {\n            _this2.editor.insertMarkdown('image', {\n              target: result.text,\n              imageUrl: result.url\n            });\n          }\n        });\n      }\n    }\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    var isCustom = !!this.editorConfig.onCustomImageUpload;\n    return isCustom ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleCustomImageUpload\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    })) : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleImageUpload,\n      style: {\n        position: 'relative'\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    }), /*#__PURE__*/React.createElement(InputFile, {\n      accept: this.editorConfig.imageAccept || '',\n      ref: this.inputFile,\n      onChange: function onChange(e) {\n        e.persist();\n\n        if (e.target.files && e.target.files.length > 0) {\n          _this3.onImageChanged(e.target.files[0]);\n        }\n      }\n    }));\n  };\n\n  return Image;\n}(PluginComponent);\n\nImage.pluginName = 'image';\nexport { Image as default };"]},"metadata":{},"sourceType":"module"}