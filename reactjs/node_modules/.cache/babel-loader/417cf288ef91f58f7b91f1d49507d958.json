{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport { PluginComponent } from './Plugin';\n\nvar AutoResize = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(AutoResize, _PluginComponent);\n\n  function AutoResize(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.timer = null;\n    _this.useTimer = _this.getConfig('useTimer') || typeof requestAnimationFrame === 'undefined';\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.doResize = _this.doResize.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = AutoResize.prototype;\n\n  _proto.doResize = function doResize() {\n    var _this2 = this;\n\n    var resizeElement = function resizeElement(e) {\n      e.style.height = 'auto';\n      var height = Math.min(Math.max(_this2.getConfig('min'), e.scrollHeight), _this2.getConfig('max'));\n      e.style.height = height + \"px\";\n      return height;\n    };\n\n    this.timer = null; // 如果渲染了编辑器，就以编辑器为准\n\n    var view = this.editor.getView();\n    var el = this.editor.getMdElement();\n    var previewer = this.editor.getHtmlElement();\n\n    if (el && view.md) {\n      var height = resizeElement(el);\n\n      if (previewer) {\n        previewer.style.height = height + \"px\";\n      }\n\n      return;\n    } // 否则，以预览区域为准\n\n\n    if (previewer && view.html) {\n      resizeElement(previewer);\n    }\n  };\n\n  _proto.handleChange = function handleChange() {\n    if (this.timer !== null) {\n      return;\n    }\n\n    if (this.useTimer) {\n      this.timer = window.setTimeout(this.doResize);\n      return;\n    }\n\n    this.timer = requestAnimationFrame(this.doResize);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.editor.on('change', this.handleChange);\n    this.editor.on('viewchange', this.handleChange);\n    this.handleChange();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.off('change', this.handleChange);\n    this.editor.off('viewchange', this.handleChange);\n\n    if (this.timer !== null && this.useTimer) {\n      window.clearTimeout(this.timer);\n      this.timer = null;\n    }\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"span\", null);\n  };\n\n  return AutoResize;\n}(PluginComponent);\n\nAutoResize.pluginName = 'auto-resize';\nAutoResize.align = 'left';\nAutoResize.defaultConfig = {\n  min: 200,\n  max: Infinity,\n  useTimer: false\n};\nexport { AutoResize as default };","map":{"version":3,"sources":["E:/fullstack/reactjs/node_modules/react-markdown-editor-lite/esm/plugins/autoResize.js"],"names":["_assertThisInitialized","_inheritsLoose","React","PluginComponent","AutoResize","_PluginComponent","props","_this","call","timer","useTimer","getConfig","requestAnimationFrame","handleChange","bind","doResize","_proto","prototype","_this2","resizeElement","e","style","height","Math","min","max","scrollHeight","view","editor","getView","el","getMdElement","previewer","getHtmlElement","md","html","window","setTimeout","componentDidMount","on","componentWillUnmount","off","clearTimeout","render","createElement","pluginName","align","defaultConfig","Infinity","default"],"mappings":"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","sourcesContent":["import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport { PluginComponent } from './Plugin';\n\nvar AutoResize = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(AutoResize, _PluginComponent);\n\n  function AutoResize(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.timer = null;\n    _this.useTimer = _this.getConfig('useTimer') || typeof requestAnimationFrame === 'undefined';\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.doResize = _this.doResize.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = AutoResize.prototype;\n\n  _proto.doResize = function doResize() {\n    var _this2 = this;\n\n    var resizeElement = function resizeElement(e) {\n      e.style.height = 'auto';\n      var height = Math.min(Math.max(_this2.getConfig('min'), e.scrollHeight), _this2.getConfig('max'));\n      e.style.height = height + \"px\";\n      return height;\n    };\n\n    this.timer = null; // 如果渲染了编辑器，就以编辑器为准\n\n    var view = this.editor.getView();\n    var el = this.editor.getMdElement();\n    var previewer = this.editor.getHtmlElement();\n\n    if (el && view.md) {\n      var height = resizeElement(el);\n\n      if (previewer) {\n        previewer.style.height = height + \"px\";\n      }\n\n      return;\n    } // 否则，以预览区域为准\n\n\n    if (previewer && view.html) {\n      resizeElement(previewer);\n    }\n  };\n\n  _proto.handleChange = function handleChange() {\n    if (this.timer !== null) {\n      return;\n    }\n\n    if (this.useTimer) {\n      this.timer = window.setTimeout(this.doResize);\n      return;\n    }\n\n    this.timer = requestAnimationFrame(this.doResize);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.editor.on('change', this.handleChange);\n    this.editor.on('viewchange', this.handleChange);\n    this.handleChange();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.off('change', this.handleChange);\n    this.editor.off('viewchange', this.handleChange);\n\n    if (this.timer !== null && this.useTimer) {\n      window.clearTimeout(this.timer);\n      this.timer = null;\n    }\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"span\", null);\n  };\n\n  return AutoResize;\n}(PluginComponent);\n\nAutoResize.pluginName = 'auto-resize';\nAutoResize.align = 'left';\nAutoResize.defaultConfig = {\n  min: 200,\n  max: Infinity,\n  useTimer: false\n};\nexport { AutoResize as default };"]},"metadata":{},"sourceType":"module"}